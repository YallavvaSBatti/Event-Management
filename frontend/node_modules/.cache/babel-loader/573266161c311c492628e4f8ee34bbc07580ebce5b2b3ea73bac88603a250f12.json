{"ast":null,"code":"import{useState,useEffect}from\"react\";import{Link}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Category=()=>{const[events,setEvents]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[search,setSearch]=useState(\"\");useEffect(()=>{const fetchAllEvents=async()=>{try{const response=await fetch(\"http://localhost:8080/api/events\");if(!response.ok)throw new Error(\"Failed to fetch\");const data=await response.json();setEvents(data);}catch(err){setError(\"Failed to load events\");}finally{setLoading(false);}};fetchAllEvents();},[]);useEffect(()=>{const handler=e=>setSearch(e.detail);window.addEventListener(\"searchEvent\",handler);return()=>window.removeEventListener(\"searchEvent\",handler);},[]);const filteredEvents=events.filter(event=>[event.title,event.venue,event.description,event.category,String(event.price)].some(field=>field===null||field===void 0?void 0:field.toLowerCase().includes(search.toLowerCase())));if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"container py-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:\"Loading events...\"})});if(error)return/*#__PURE__*/_jsx(\"div\",{className:\"container py-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-center text-destructive\",children:error})});return/*#__PURE__*/_jsxs(\"div\",{className:\"container py-12\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-2\",children:\"All Events\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted text-lg\",children:\"Browse all events!\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\",children:filteredEvents.map(event=>/*#__PURE__*/_jsx(Link,{to:\"/events/\".concat(event.id),children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"img\",{src:event.imageUrl||\"/placeholder.svg?height=200&width=300&query=event\",alt:event.title,style:{width:\"100%\",height:\"200px\",objectFit:\"cover\",borderRadius:\"var(--radius)\",marginBottom:\"1rem\"}}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold mb-2\",children:event.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-muted text-sm mb-4\",children:event.venue}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-muted\",children:new Date(event.eventDate).toLocaleString()}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-lg font-semibold\",children:[\"$\",event.price]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-muted\",children:[event.availableSeats,\" seats left\"]})]})},event.id))})]});};export default Category;","map":{"version":3,"names":["useState","useEffect","Link","jsx","_jsx","jsxs","_jsxs","Category","events","setEvents","loading","setLoading","error","setError","search","setSearch","fetchAllEvents","response","fetch","ok","Error","data","json","err","handler","e","detail","window","addEventListener","removeEventListener","filteredEvents","filter","event","title","venue","description","category","String","price","some","field","toLowerCase","includes","className","children","map","to","concat","id","src","imageUrl","alt","style","width","height","objectFit","borderRadius","marginBottom","Date","eventDate","toLocaleString","availableSeats"],"sources":["D:/assignment/v0-event-booking-platform-main/frontend/src/components/Category.js"],"sourcesContent":["import { useState, useEffect } from \"react\"\r\nimport { Link } from \"react-router-dom\"\r\n\r\nconst Category = () => {\r\n  const [events, setEvents] = useState([])\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState(null)\r\n  const [search, setSearch] = useState(\"\")\r\n\r\n  useEffect(() => {\r\n    const fetchAllEvents = async () => {\r\n      try {\r\n        const response = await fetch(`http://localhost:8080/api/events`)\r\n        if (!response.ok) throw new Error(\"Failed to fetch\")\r\n        const data = await response.json()\r\n        setEvents(data)\r\n      } catch (err) {\r\n        setError(\"Failed to load events\")\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n    fetchAllEvents()\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    const handler = e => setSearch(e.detail)\r\n    window.addEventListener(\"searchEvent\", handler)\r\n    return () => window.removeEventListener(\"searchEvent\", handler)\r\n  }, [])\r\n\r\n  const filteredEvents = events.filter(event =>\r\n    [event.title, event.venue, event.description, event.category, String(event.price)]\r\n      .some(field => field?.toLowerCase().includes(search.toLowerCase()))\r\n  )\r\n\r\n  if (loading) return <div className=\"container py-12\"><div className=\"text-center\">Loading events...</div></div>\r\n  if (error) return <div className=\"container py-12\"><div className=\"text-center text-destructive\">{error}</div></div>\r\n\r\n  return (\r\n    <div className=\"container py-12\">\r\n      <div className=\"mb-8\">\r\n        <h2 className=\"text-2xl font-bold mb-2\">All Events</h2>\r\n        <p className=\"text-muted text-lg\">Browse all events!</p>\r\n      </div>\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n        {filteredEvents.map((event) => (\r\n          <Link key={event.id} to={`/events/${event.id}`}>\r\n            <div className=\"card\">\r\n              <img\r\n                src={event.imageUrl || \"/placeholder.svg?height=200&width=300&query=event\"}\r\n                alt={event.title}\r\n                style={{\r\n                  width: \"100%\",\r\n                  height: \"200px\",\r\n                  objectFit: \"cover\",\r\n                  borderRadius: \"var(--radius)\",\r\n                  marginBottom: \"1rem\",\r\n                }}\r\n              />\r\n              <h3 className=\"text-xl font-semibold mb-2\">{event.title}</h3>\r\n              <p className=\"text-muted text-sm mb-4\">{event.venue}</p>\r\n              <p className=\"text-sm text-muted\">{new Date(event.eventDate).toLocaleString()}</p>\r\n              <p className=\"text-lg font-semibold\">${event.price}</p>\r\n              <div className=\"text-sm text-muted\">{event.availableSeats} seats left</div>\r\n            </div>\r\n          </Link>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Category"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}